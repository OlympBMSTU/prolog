(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){e.exports=n(282)},121:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),o=n.n(i),s=(n(121),n(115)),c=n(22),l=n(23),d=n(18),u=n(16),h=n(25),m=n(24),p=n(26),f=n(111),g=n.n(f),E=n(112),b=n.n(E),v=n(19),y=n.n(v),S=n(113),w=n.n(S),j=n(72),O=n.n(j),k=n(73),D=n.n(k),C=n(74),x=n.n(C),L=n(37),T=n.n(L),_=n(68),W=n.n(_),B=n(109),F=n.n(B),I=n(67),P=n.n(I),R=n(50),A=n.n(R),q=n(110),J=n.n(q),N=n(51),U=n(36),V=n.n(U),H=n(104),M=n.n(H),Y=n(106),G=n.n(Y),X=n(69),$=n.n(X),z=n(105),K=n.n(z),Q=n(103),Z=n.n(Q),ee=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={selected:-1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.state.selected!==t.selected||this.props.showError!==e.showError}}]),Object(u.a)(t,[{key:"render",value:function(){var e=this,n={depth:this.props.depth+1,onSelectionChanged:this.props.onSelectionChanged,showError:this.props.showError};return r.a.createElement(V.a,{style:{marginLeft:8,backgroundColor:this.props.showError&&-1===this.state.selected?"#ff9292":"#fff"}},r.a.createElement(T.a,{subheader:this.props.subhint?r.a.createElement(Z.a,null,this.props.subhint):null},this.props.children.map(function(a,i){var o=i===e.state.selected;return r.a.createElement("div",{key:i},r.a.createElement(M.a,{dense:!0,button:!0,onClick:function(){e.setState({selected:i}),e.props.onSelectionChanged(Object(N.a)(a.indexes),!a.children)}},r.a.createElement(K.a,{checked:o}),r.a.createElement(G.a,{primary:a.text,secondary:a.hint})),r.a.createElement($.a,{in:o},o&&a.children?r.a.createElement(t,Object.assign({},n,{subhint:a.subhint,children:a.children.map(function(e,t){var n={text:e.title,hint:e.hint?e.hint.help:null,subhint:e.hint?e.hint.instruction:null,indexes:Object(N.a)(a.indexes).concat([t])};return e.children?Object(l.a)({},n,{children:e.children}):{indexes:Object(N.a)(a.indexes).concat([t]),text:"".concat(e.name," - ").concat(e.fullname)}})})):null))})))}}]),t}(a.Component),te=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={selected:null},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ee,{children:this.props.children.map(function(e,t){return{children:e.children,text:e.title,hint:e.hint?e.hint.help:null,subhint:e.hint?e.hint.instruction:null,indexes:[t]}}),showError:this.props.showError,depth:0,onSelectionChanged:function(t,n){e.props.onSelectionChanged&&e.props.onSelectionChanged(),n?(null==e.state.selected&&e.props.onDoneStateChanged(!0,t),e.setState({selected:t})):(e.state.selected&&e.props.onDoneStateChanged(!1,null),e.setState({selected:null}))}})}}]),t}(a.Component),ne=n(38),ae=n.n(ne),re=n(108),ie=n.n(re),oe=n(107),se=n.n(oe),ce=n(70),le=n.n(ce),de=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){var a=Object(l.a)({},n.state.data,Object(c.a)({},e,t));a.valid=""!==a.theme&&(!a.knownDirector||""!==a.fio&&""!==a.work&&""!==a.degree&&""!==a.position),n.props.onChange&&n.props.onChange(a),n.setState({data:a})},n.getSwitch=function(e){return r.a.createElement(se.a,{checked:n.state.data[e],onChange:function(t){n.handleChange(e,t.target.checked)},color:"primary"})},n.getTextField=function(e,t){return r.a.createElement(ie.a,{key:t,error:n.props.showError&&""===n.state.data[t],fullWidth:!0,label:e,value:n.state.data[t],onChange:function(e){n.handleChange(t,e.target.value)}})},n.state={data:{theme:"",knownDirector:!1,fio:"",work:"",degree:"",position:"",valid:!1}},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ae.a,{variant:"subtitle1",color:"primary",style:{padding:10}},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u043d\u0430\u0443\u0447\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b"),r.a.createElement("form",{noValidate:!0,autoComplete:"off",style:{paddingLeft:10,paddingBottom:30}},this.getTextField("\u0422\u0435\u043c\u0430 \u043d\u0430\u0443\u0447\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b","theme")),r.a.createElement(ae.a,{variant:"subtitle1",color:"primary",style:{padding:10}},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043d\u0430\u0443\u0447\u043d\u043e\u043c \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435"),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},this.getSwitch("knownDirector"),r.a.createElement(ae.a,{variant:"subtitle2"},"\u041d\u0430\u0443\u0447\u043d\u044b\u0439 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d")),r.a.createElement(le.a,{in:this.state.data.knownDirector},r.a.createElement("form",{noValidate:!0,autoComplete:"off",style:{paddingLeft:10,paddingBottom:30}},this.getTextField("\u0424\u0418\u041e","fio"),this.getTextField("\u041c\u0435\u0441\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u044b","work"),this.getTextField("\u0423\u0447\u0435\u043d\u0430\u044f \u0441\u0442\u0435\u043f\u0435\u043d\u044c","degree"),this.getTextField("\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c","position"))))}}]),t}(a.Component);de.defaultProps={showError:!1};var ue=de,he=n(114),me=n.n(he),pe=n(66),fe=n.n(pe),ge=n(71),Ee=n.n(ge),be=new(function(){function e(){Object(d.a)(this,e),this.host="https://olymp.bmstu.ru/api/personal"}return Object(u.a)(e,[{key:"requestData",value:function(e,t,n){var a=this.host+"/"+e,r={credentials:"include",method:t,headers:{"Content-type":"application/json","Access-Control-Request-Method":t},mode:"cors",body:null};return"POST"===t&&"undefined"!==typeof n&&(r.body=JSON.stringify(n)),fetch(a,r).then(function(e){return e=e.json()},function(e){return e})}}]),e}()),ve=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).onDataLoaded=function(e){var t={},a={};Object.entries(e.children).map(function(e){return e[1]}).forEach(function(e){t[e.title]=!1,a[e.title]={done:0===e.children.length,data:null}}),n.setState({selectedDirections:t,directionSettingsDoneStates:a,data:e})},n.renderDirectionsList=function(){return r.a.createElement(T.a,null,Object.entries(n.state.data.children).map(function(e){return e[1]}).map(function(e){return r.a.createElement(P.a,{dense:!0,button:!0,key:e.title,onClick:function(){n.setState({selectedDirections:Object(l.a)({},n.state.selectedDirections,Object(c.a)({},e.title,!n.state.selectedDirections[e.title]))})}},r.a.createElement(F.a,{checked:n.state.selectedDirections[e.title],tabIndex:-1,disableRipple:!0}),r.a.createElement(W.a,{primary:e.title,secondary:e.hint.help}))}))},n.renderDirectionsSettings=function(){return n.state.data.children.map(function(e){return n.state.selectedDirections[e.title]?e:null}).filter(function(e){return null!=e}).map(function(e){return 0===e.children.length?null:r.a.createElement("div",{key:e.title,style:{marginTop:40}},r.a.createElement(J.a,null),r.a.createElement(y.a,{variant:"h5",color:"primary",style:{padding:12,paddingBottom:0}},e.title),"\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e\u0435 \u0434\u0435\u043b\u043e"===e.title&&r.a.createElement(ue,{onChange:function(e){n.setState({scientificWorkSettings:e}),n.state.showError&&n.setState({showError:!1})},showError:n.state.showError}),r.a.createElement(y.a,{variant:"subtitle1",color:"primary",style:{padding:10}},e.hint.instruction),r.a.createElement(te,{children:e.children,showError:n.state.showError,onDoneStateChanged:function(t,a){n.setState({directionSettingsDoneStates:Object(l.a)({},n.state.directionSettingsDoneStates,Object(c.a)({},e.title,{done:t,data:a}))})},onSelectionChanged:function(){n.state.showError&&n.setState({showError:!1})}}))})},n.renderLoading=function(){return r.a.createElement("div",{style:{position:"relative",flex:"1 1 auto",display:"flex",width:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement(y.a,{variant:"h5"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))},n.submitData=function(){var e=Object.keys(n.state.directionSettingsDoneStates).map(function(e){return{name:e,data:n.state.directionSettingsDoneStates[e].data}}).filter(function(e){return null!=e.data}).map(function(e){for(var t=[],a=n.state.data.children.filter(function(t){return t.title===e.name})[0],r=0;r<e.data.length;r++){var i=e.data[r];(a=a.children[i]).title&&t.push(a.title),a.id&&t.push(a.id)}return{name:e.name,data:t}});if(n.state.scientificWorkSettings){var t=n.state.scientificWorkSettings;if(t.knownDirector){var a=t;a.valid;t=Object(s.a)(a,["valid"])}else t={theme:t.theme,knownDirector:!1};e.push({name:"\u041d\u0430\u0443\u0447\u0440\u0443\u043a",data:t})}n.setState({submitLoading:!0}),n.api.requestData("olymps","POST",e).then(function(e){window.location.href="https://olymp.bmstu.ru/?from=olymps&res_code=".concat(e.res_code)}).catch(function(e){n.setState({submitLoading:!1})})},n.api=be,n.state={data:null,selectedDirections:null,step:0,showError:!1,directionSettingsDoneStates:null,scientificWorkSettings:null,submitLoading:!1},fetch("data/db.json").then(function(e){return e.json()}).then(function(e){return n.onDataLoaded(e.answer[0])}).catch(function(e){console.log(e)}),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{display:"flex",flexFlow:"column",minHeight:"100vh",width:"100%"}},r.a.createElement(g.a,{position:"static"},r.a.createElement(b.a,null,r.a.createElement(y.a,{variant:"h6",color:"inherit",noWrap:!0},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u043b\u0438\u043c\u043f\u0438\u0430\u0434\u044b"))),null==this.state.data?this.renderLoading():r.a.createElement("div",null,r.a.createElement(y.a,{variant:"h4",color:"primary",style:{padding:24,paddingBottom:0}},this.state.data.title),r.a.createElement(w.a,{activeStep:this.state.step,orientation:"vertical"},r.a.createElement(O.a,null,r.a.createElement(D.a,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),r.a.createElement(x.a,null,this.renderDirectionsList(),r.a.createElement(A.a,{color:"primary",variant:"outlined",style:{marginLeft:28},onClick:function(){e.setState({step:1})},disabled:!Object.values(this.state.selectedDirections).includes(!0)},"\u0414\u0430\u043b\u0435\u0435"))),r.a.createElement(O.a,null,r.a.createElement(D.a,null,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(x.a,null,r.a.createElement(A.a,{color:"primary",variant:"outlined",style:{margin:8},onClick:function(){e.setState({step:0,showError:!1})}},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),r.a.createElement(A.a,{disabled:this.state.submitLoading,color:"primary",variant:"contained",style:{margin:8},buttonRef:function(t){e.readyButton=t},onClick:function(){if(Object.keys(e.state.selectedDirections).filter(function(t){return e.state.selectedDirections[t]}).map(function(t){return e.state.directionSettingsDoneStates[t].done}).includes(!1))e.setState({showError:!0});else{if(e.state.selectedDirections["\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e\u0435 \u0434\u0435\u043b\u043e"]){var t=e.state.scientificWorkSettings;if(!t)return void e.setState({showError:!0});if(!t.valid)return void e.setState({showError:!0})}e.submitData()}}},"\u0413\u043e\u0442\u043e\u0432\u043e"),r.a.createElement(me.a,{anchorEl:this.readyButton,open:this.state.showError,transition:!0},function(e){var t=e.TransitionProps;return r.a.createElement(Ee.a,Object.assign({},t,{timeout:250}),r.a.createElement(fe.a,{style:{backgroundColor:"#ff9292",padding:12}},r.a.createElement(y.a,null,"\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b")))}),this.renderDirectionsSettings())))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0,o.a.render(r.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[116,2,1]]]);
//# sourceMappingURL=main.b41a4f47.chunk.js.map