(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){e.exports=n(282)},121:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),l=n.n(i),s=(n(121),n(20)),c=n(18),o=n(17),u=n(14),d=n(22),h=n(21),p=n(23),f=n(112),m=n.n(f),b=n(113),E=n.n(b),g=n(27),v=n.n(g),y=n(114),j=n.n(y),O=n(75),S=n.n(O),w=n(76),k=n.n(w),D=n(77),C=n.n(D),x=n(40),L=n.n(x),T=n(73),R=n.n(T),F=n(54),P=n.n(F),_=n(72),A=n.n(_),B=n(28),I=n.n(B),W=n(34),U=n.n(W),q=n(78),J=n(41),N=n(39),H=n.n(N),M=n(109),V=n.n(M),Y=n(111),G=n.n(Y),X=n(74),$=n.n(X),z=n(110),K=n.n(z),Q=n(108),Z=n.n(Q),ee=n(26),te=n.n(ee),ne=n(53),ae=n.n(ne),re=n(107),ie=n.n(re),le=n(71),se=n.n(le),ce=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).getData=function(){return n.state.specified?{data:Object(c.a)({},n.state),error:""===n.state.data.f||""===n.state.data.i||""===n.state.data.o||""===n.state.data.work||""===n.state.data.position}:{data:{specified:!1},error:!1}},n.getTextField=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r.a.createElement(ae.a,{error:n.props.showError&&""===n.state.data[t]&&a,fullWidth:!0,label:e,value:n.state.data[t],onChange:function(e){n.setState({data:Object(c.a)({},n.state.data,Object(s.a)({},t,e.target.value))})}})},n.state={specified:!1,data:{f:"",i:"",o:"",work:"",degree:"",position:""}},n.props.onChange(n.getData()),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){Object.is(this.state.data,t.data)&&this.state.specified===t.specified||this.props.onChange(this.getData())}}]),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(te.a,{variant:"subtitle1",color:"primary",style:{padding:10}},this.props.field.title),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(ie.a,{checked:this.state.specified,onChange:function(t){e.setState({specified:t.target.checked})},color:"primary"}),r.a.createElement(te.a,{variant:"subtitle2"},"\u041d\u0430\u0443\u0447\u043d\u044b\u0439 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d")),r.a.createElement(se.a,{in:this.state.specified},r.a.createElement("form",{noValidate:!0,autoComplete:"off",style:{paddingLeft:20,paddingBottom:30}},this.getTextField("\u0424\u0430\u043c\u0438\u043b\u0438\u044f*","f"),this.getTextField("\u0418\u043c\u044f*","i"),this.getTextField("\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e*","o"),this.getTextField("\u041c\u0435\u0441\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u044b*","work"),this.getTextField("\u0423\u0447\u0435\u043d\u0430\u044f \u0441\u0442\u0435\u043f\u0435\u043d\u044c","degree",!1),this.getTextField("\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c*","position"))),r.a.createElement(U.a,null))}}]),t}(a.Component);ce.defaultProps={showError:!1};var oe=ce,ue=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).getData=function(){return{data:{data:n.state},error:""===n.state.theme}},n.state={theme:""},n.props.onChange(n.getData()),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){t.theme!==this.state.theme&&this.props.onChange(this.getData())}}]),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(te.a,{variant:"subtitle1",color:"primary",style:{padding:12}},this.props.field.title),r.a.createElement(ae.a,{style:{margin:20,marginTop:0},error:this.props.showError&&""===this.state.theme,fullWidth:!0,label:"".concat(this.props.field.title,"*"),value:this.state.theme,onChange:function(t){e.setState({theme:t.target.value})}}),r.a.createElement(U.a,null))}}]),t}(a.Component);ue.defaultProps={showError:!1};var de=ue,he=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).check=function(){return Object(c.a)({},n.state,{next:n.subRefs.map(function(e){return e?e.check():null})})},n.isError=function(){return 0===n.state.selected.length||n.state.fieldsData&&Object.values(n.state.fieldsData).includes(null)||n.state.selected.map(function(e){var t=n.subRefs[e];return!!t&&t.isError()}).includes(!0)},n.clear=function(){n.setState({selected:[]}),n.subRefs.filter(function(e){return!!e}).forEach(function(e){return e.clear()}),n.props.onSelectionChanged()},n.clearSublist=function(e){var t=n.subRefs[e];t&&t.clear()},n.renderFields=function(){if(!n.props.fields)return null;var e=Object(J.a)(Object(J.a)(n));return n.props.fields.map(function(t){var n={field:t,onChange:function(n){var a=n.error?null:n.data;e.setState({fieldsData:Object(c.a)({},e.state.fieldsData,Object(s.a)({},t.name,a))}),e.props.onSelectionChanged()},showError:e.props.showError,key:t.name};return function(){switch(t.type){case"field":return r.a.createElement(de,n);case"director":return r.a.createElement(oe,n);default:return null}}()})};var a=null;return n.props.fields&&(a={},n.props.fields.forEach(function(e){a[e.name]=null})),n.state={selected:[],fieldsData:a},n.subRefs=[],n.props.children.forEach(function(e){n.subRefs.push(null)}),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return!Object.is(this.state.selected,t.selected)||this.props.showError!==e.showError}}]),Object(u.a)(t,[{key:"render",value:function(){var e=this,n={depth:this.props.depth+1,onSelectionChanged:this.props.onSelectionChanged,showError:this.props.showError,topList:this.props.topList},a=this.props.showError&&0===this.state.selected.length,i=this;return r.a.createElement(H.a,{style:{marginLeft:8,backgroundColor:a?"#ff9292":"#fff"}},r.a.createElement(L.a,{subheader:r.a.createElement(Z.a,{disableSticky:!0},this.props.subhint?this.props.subhint:null,this.renderFields())},this.props.children.map(function(a,l){var s=e.state.selected.includes(l);return r.a.createElement("div",{key:l},r.a.createElement(V.a,{dense:!0,button:!0,onClick:function(){i.props.multiSelect?i.state.selected.includes(l)?(i.clearSublist(l),i.setState({selected:i.state.selected.filter(function(e){return e!==l})})):i.setState({selected:Object(q.a)(i.state.selected).concat([l])}):i.state.selected[0]===l?(i.clearSublist(l),i.setState({selected:[]})):i.setState({selected:[l]}),e.props.onSelectionChanged()}},e.props.multiSelect?r.a.createElement(P.a,{checked:s}):r.a.createElement(K.a,{checked:s}),r.a.createElement(G.a,{primary:a.text,secondary:a.hint,inset:!0,secondaryTypographyProps:{component:"pre",style:{whiteSpace:"pre-wrap"}}})),r.a.createElement($.a,{in:s,mountOnEnter:!0},a.children?r.a.createElement(t,Object.assign({},n,{ref:function(t){e.subRefs[l]=t},subhint:a.subhint,fields:a.fields,multiSelect:a.multiSelect,indexes:Object(q.a)(e.props.indexes).concat([{index:l,fieldsData:e.state.fieldsData}]),children:a.children.map(function(e,t){var n={multiSelect:e.multiSelect,text:e.title,hint:e.hint?e.hint.help:null,subhint:e.hint?e.hint.instruction:null,fields:e.fields};return e.children?Object(c.a)({},n,{children:e.children}):{text:"".concat(e.name," - ").concat(e.fullname)}})})):null))})))}}]),t}(a.Component),pe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).clear=function(){n.listRef.clear(),n.props.onSelectionChanged&&n.props.onSelectionChanged()},n.check=function(){return n.listRef.check()},n.isError=function(){return n.listRef.isError()},n.children=n.props.children,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(te.a,{variant:"subtitle1",color:"primary",style:{padding:10}},this.props.instruction),r.a.createElement(I.a,{color:"primary",variant:"contained",onClick:function(){return e.clear()},style:{margin:8}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u044b\u0431\u043e\u0440"),r.a.createElement(he,{ref:function(t){return e.listRef=t},children:this.props.children.map(function(e,t){return{children:e.children,fields:e.fields,text:e.title,multiSelect:e.multiselect,hint:e.hint?e.hint.help:null,subhint:e.hint?e.hint.instruction:null}}),topList:this,onSelectionChanged:function(){return e.props.onSelectionChanged()},indexes:[],clearFunc:this.clear,showError:this.props.showError,depth:0}))}}]),t}(a.Component);pe.defaultProps={multiSelect:!1};var fe=pe,me=n(115),be=n.n(me),Ee=n(70),ge=n.n(Ee),ve=n(69),ye=n.n(ve),je=new(function(){function e(){Object(o.a)(this,e),this.host="https://olymp.bmstu.ru/api/personal"}return Object(u.a)(e,[{key:"requestData",value:function(e,t,n){var a=this.host+"/"+e,r={credentials:"include",method:t,headers:{"Content-type":"application/json","Access-Control-Request-Method":t},mode:"cors",body:null};return"POST"===t&&"undefined"!==typeof n&&(r.body=JSON.stringify(n)),fetch(a,r).then(function(e){return e=e.json()},function(e){return e})}}]),e}()),Oe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).onDataLoaded=function(e){var t={};Object.entries(e.children).map(function(e){return e[1]}).forEach(function(e){t[e.title]=!1}),n.setState({selectedDirections:t,data:e})},n.renderDirectionsList=function(){return r.a.createElement(L.a,null,Object.entries(n.state.data.children).map(function(e){return e[1]}).map(function(e){return r.a.createElement(A.a,{dense:!0,button:!0,key:e.title,onClick:function(){n.setState({selectedDirections:Object(c.a)({},n.state.selectedDirections,Object(s.a)({},e.title,!n.state.selectedDirections[e.title]))})}},r.a.createElement(P.a,{checked:n.state.selectedDirections[e.title],tabIndex:-1,disableRipple:!0}),r.a.createElement(R.a,{primary:e.title,inset:!0,secondary:e.hint.help,secondaryTypographyProps:{component:"pre",style:{whiteSpace:"pre-wrap"}}}))}))},n.renderDirectionsSettings=function(){return n.state.data.children.map(function(e){return n.state.selectedDirections[e.title]?e:null}).filter(function(e){return null!=e}).map(function(e){return r.a.createElement("div",{key:e.title,style:{marginTop:40}},r.a.createElement(U.a,null),r.a.createElement("div",null,r.a.createElement(v.a,{variant:"h5",color:"primary",style:{display:"inline-block",margin:10,verticalAlign:"middle"}},e.title),r.a.createElement(I.a,{color:"secondary",variant:"outlined",style:{display:"inline-block",margin:10,verticalAlign:"middle"},onClick:function(){var t=1;1===Object.values(n.state.selectedDirections).filter(function(e){return e}).length&&(t=0),n.setState({selectedDirections:Object(c.a)({},n.state.selectedDirections,Object(s.a)({},e.title,!n.state.selectedDirections[e.title])),step:t,showError:!1})}},"\u041d\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u044d\u0442\u043e\u0439 \u043e\u043b\u0438\u043c\u043f\u0438\u0430\u0434\u0435")),0!==e.children.length&&r.a.createElement(fe,{ref:function(t){n.olimpSettingsList[e.title]=t},instruction:e.hint.instruction,children:e.children,showError:n.state.showError,onSelectionChanged:function(){n.state.showError&&n.setState({showError:!1})}}))})},n.renderLoading=function(){return r.a.createElement("div",{style:{position:"relative",flex:"1 1 auto",display:"flex",width:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement(v.a,{variant:"h5"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))},n.submitData=function(e){var t=e.map(function(e){var t=e.olimp,a=n.state.data.children.filter(function(e){return e.title===t})[0];return 0===a.children.length?{olimp:t,data:{}}:{olimp:t,data:function e(t,n){return{fieldsData:t.fieldsData,next:t.next.map(function(t,a){return null==t?null:{id:a,data:e(t,n.children[a])}}).filter(function(e){return null!=e}),selected:n.children.map(function(e,n){return t.selected.includes(n)?e.title||e.id:null}).filter(function(e){return null!=e})}}(e.data,a)}});n.setState({submitLoading:!0}),n.api.requestData("olymps","POST",t).then(function(e){window.location.href="https://olymp.bmstu.ru/?from=olymps&res_code=".concat(e.res_code)}).catch(function(e){n.setState({submitLoading:!1})})},n.api=je,n.state={data:null,selectedDirections:null,step:0,showError:!1,submitLoading:!1},n.olimpSettingsList={},fetch("data/db.json").then(function(e){return e.json()}).then(function(e){return n.onDataLoaded(e.answer[0])}).catch(function(e){console.log(e)}),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this;return r.a.createElement("div",{style:{display:"flex",flexFlow:"column",minHeight:"100vh",width:"100%"}},r.a.createElement(m.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(v.a,{variant:"h6",color:"inherit",noWrap:!0},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u043b\u0438\u043c\u043f\u0438\u0430\u0434\u044b"))),null==this.state.data?this.renderLoading():r.a.createElement("div",null,r.a.createElement(v.a,{variant:"h4",color:"primary",style:{padding:24,paddingBottom:0}},this.state.data.title),r.a.createElement(j.a,{activeStep:this.state.step,orientation:"vertical"},r.a.createElement(S.a,null,r.a.createElement(k.a,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),r.a.createElement(C.a,null,this.renderDirectionsList(),r.a.createElement(I.a,{color:"primary",variant:"outlined",style:{marginLeft:28},onClick:function(){e.setState({step:1})},disabled:!Object.values(this.state.selectedDirections).includes(!0)},"\u0414\u0430\u043b\u0435\u0435"))),r.a.createElement(S.a,null,r.a.createElement(k.a,null,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(C.a,null,r.a.createElement(I.a,{color:"primary",variant:"outlined",style:{margin:8},onClick:function(){e.setState({step:0,showError:!1})}},"\u041d\u0430\u0437\u0430\u0434 (\u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f)"),r.a.createElement(be.a,{anchorEl:this.readyButton,open:this.state.showError,transition:!0},function(e){var t=e.TransitionProps;return r.a.createElement(ye.a,Object.assign({},t,{timeout:250}),r.a.createElement(ge.a,{style:{backgroundColor:"#ff9292",padding:12}},r.a.createElement(v.a,null,"\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b")))}),this.renderDirectionsSettings(),r.a.createElement("div",{style:{margin:8,marginTop:50}},r.a.createElement(I.a,{disabled:this.state.submitLoading,color:"primary",variant:"contained",fullWidth:!0,buttonRef:function(t){e.readyButton=t},onClick:function(){var n=Object.keys(t.state.selectedDirections).filter(function(e){return t.state.selectedDirections[e]}).map(function(e){var n=t.olimpSettingsList[e];return n?n.isError()?null:{olimp:e,data:n.check()}:{olimp:e,data:{}}});n.includes(null)?e.setState({showError:!0}):t.submitData(n)}},"\u0413\u043e\u0442\u043e\u0432\u043e")))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0,l.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[116,2,1]]]);
//# sourceMappingURL=main.c39f46fc.chunk.js.map